//
//  kickstart.c
//  Sean16CPU
//
//  Created by Frida Boleslawska on 26.09.24.
//

// CPU INSTRUCTIONS
// EXIT  - 0x00
// STORE - 0x01 <REGISTER> <VALUE>
// ADD   - 0x02 <REGISTER> <REGISTER>
// SUB   - 0x03 <REGISTER> <REGISTER>
// MUL   - 0x04 <REGISTER> <REGISTER>
// DIV   - 0x05 <REGISTER> <REGISTER>
// DSP   - 0x06 <REGISTER>
// JMP   - 0x07 <REGISTER>
// IF    - 0x08 <MODE>     <REGISTER> <REGISTER> <REGISTER>

// GPU INSTRUCTIONS
// GPX   - 0xA0 <REGISTER> <REGISTER> <REGISTER> <VALUE>
// GLI   - 0xA1 <REGISTER> <REGISTER> <REGISTER> <REGISTER>
// GDC   - 0xA2 <REGISTER> <REGISTER> <REGISTER> <VALUE>
// GCS   - 0xA3

#include "Sean16.h"

extern void kernel_init(uint8_t binmap[1000][6]);

void kickstart(void) {
    uint8_t binmap[1000][6] = {
        // INIT <0x41>
        {0x07, 0x49, 0x00, 0x00, 0x00, 0x00}, //41 JMP 0                       // IMPORTANT POINT TO => BTN LABEL

        // MAIN <0x42>
        {0x09, 0x05, 0x06, 0x02, 0x00, 0x00}, //42 MOUSE
        {0x08, 0x41, 0x02, 0x43, 0x45, 0x00}, //43 IF                          // IMPORTANT POINT TO => PIXEL LABEL
        {0x07, 0x42, 0x00, 0x00, 0x00, 0x00}, //44 JMP 0                       // IMPORTANT POINT TO => MAIN
        
        // PIXEL LABEL <0x45>
        {0xA0, 0x05, 0x06, 0x48, 0x00, 0x00}, //45 GPU PX
        {0x07, 0x42, 0x00, 0x00, 0x00, 0x00}, //46 JMP 0                       // IMPORTANT POINT TO => MAIN
        
        // SWITCH LABEL <0x47>
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, //47
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, //48
        
        // BTN LABEL <0x49>
        {0x01, 0x00, 0x47, 0x00, 0x00, 0x00}, //49 STORE R0 7
        {0x01, 0x02, 0x51, 0x00, 0x00, 0x00}, //50 STORE R2 10
        {0x01, 0x03, 0x60, 0x00, 0x00, 0x00}, //51 STORE R3 AA
        {0xA1, 0x00, 0x00, 0x00, 0x02, 0x46}, //52 GPU LINE R0 R1 => R0 R2
        {0xA1, 0x00, 0x02, 0x03, 0x02, 0x46}, //53 GPU LINE R0 R2 => R3 R2
        {0xA1, 0x03, 0x02, 0x03, 0x00, 0x46}, //54 GPU LINE R3 R2 => R3 R1
        {0xA1, 0x03, 0x00, 0x00, 0x00, 0x46}, //55 GPU LINE R3 R1 => R0 R1
        {0x01, 0x00, 0x47, 0x00, 0x00, 0x00}, //56 STORE R0 7
        {0x01, 0x05, 0x4A, 0x00, 0x00, 0x00}, //57 STORE R0 7
        {0x01, 0x06, 0x49, 0x00, 0x00, 0x00}, //58 STORE R1 7
        {0xA2, 0x05, 0x06, 0x86, 0x48, 0x00}, //59
        {0x01, 0x05, 0x50, 0x00, 0x00, 0x00}, //60 STORE R0 7
        {0x01, 0x06, 0x49, 0x00, 0x00, 0x00}, //61 STORE R1 7
        {0xA2, 0x05, 0x06, 0x99, 0x48, 0x00}, //62
        {0x01, 0x05, 0x56, 0x00, 0x00, 0x00}, //63 STORE R0 7
        {0x01, 0x06, 0x49, 0x00, 0x00, 0x00}, //64 STORE R1 7
        {0xA2, 0x05, 0x06, 0x8A, 0x48, 0x00}, //65
        {0x01, 0x05, 0x5B, 0x00, 0x00, 0x00}, //66 STORE R0 7
        {0x01, 0x06, 0x49, 0x00, 0x00, 0x00}, //67 STORE R1 7
        {0xA2, 0x05, 0x06, 0x95, 0x48, 0x00}, //68
        {0x07, 0x42, 0x00, 0x00, 0x00, 0x00}, //69 JMP 0                        // IMPORTANT POINT TO => MAIN
        
        {0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, //70
    };
    
    kernel_init(binmap);
}
